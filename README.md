# 1. Цель проекта

Цель проекта – разработать платформу для онлайн школы. 
Где пользователи смогут получать теорию и практические задания по ней. А модераторы добавлять
новые задания и общаться с пользователями.
Так же предусматривается интеграция с Telegram-ботом для получения новостей и недельной статистики.

# 2. Описание системы

Система состоит из следующих основных функциональных блоков:

1. Регистрация, инициализация, аутентификация
2. Функционал для пользователя
3. Функционал для модератора
4. Функционал интеграции с Telegram
5. Уведомления о новых постах (tg, почта)

# 2.0 Типы пользователей

Предусматривается два типа: пользователь платформы(ученик) и модератор(учитель)

Пользователь может выполнять задания, тесты, смотреть личную статистику, общаться в чате с модераторами,
получать рассылки, иметь доступ к обучающим видосам.

Модератор может редактировать задания, видеть статистику любого пользователя, общаться с пользователями в чате, 
отправлять рассылку.

# 2.1 Регистрация

Регистрация модератора не предусматривается, доступ будет даваться при помощи команды на сервере.

Процесс заведения автора через команду на сервере должен быть описан в
документации Системы.

На вход система будет получать от модератора:

* email — обязательное поле
* пароль — обязательное поле

Процесс регистрации подписчиков, конечно, должен быть реализован в
интерфейсах Системы. При регистрации подписчика должны быть запрошены
следующие поля:

* email — обязательное поле
* имя и фамилия — обязательное поле
* телефон — опциональное поле

Все данные сразу выгружаются в excel таблицу.

После отправки формы регистрации подписчика ему на email приходит
письмо с первым кодом, по которому он может войти. Аутентификация будет
происходить по разовым кодам, приходящим на email.

# 2.2 Функционал для пользователя

Каждый пользователь после аутентификации получает доступ к главной страницы с выборами курса, а так же к своему профилю, доступный 
на платформе.

Этот функционал состоит из следующих блоков:
1. Выбор курса 
2. Просмотр статистики
3. Чат с модераторами
4. Получение рассылки tg-bot

### 2.2.1 Выбор курса

На главной страницы будет выбор курса(60+ баллов, 80+ баллов), пользователь может посмотреть краткое описание курса
и темы, которые будут на платформе. Так же к некоторым задачам будет прилагаться решение. Каждая тема в онлайн-системе
будет открываться в определенное время.

### 2.2.2 Просмотр статистики

Каждый пользователь может посмотреть свою статистику по проделанным задачам (по типу: сделано 3/18 тем и то же самое по 
проделанным задачам) в профиле можно увидеть day-streak, а так же график активности (кол-во задач по времени). Добавить
последнюю правильно сделанную задачу.

### 2.2.3 Чат с модераторами

На платформе в каждом задании можно задать вопрос модератору по конкретной задаче. Так же можно задавать вопрос
в чате на главной страницы для общих вопросов.
(Кнопка поддержкаб вкладка часто задаваемые вопросы, по типу доки для поступления, баллы на специальности, кнопка
нет решения моей проблема и перенос на страницу чата с поддержкой)

### 2.2.4 Получение рассылки tg-bot

На платформе будет интеграция с tg-ботом, пользователь получает новости созданные модератором. Так же будет оповещения
об ответе модератора на сообщение как в skillbox.

# 2.3 Функционал модератора

Модератор после аутентификации получает доступ к главной страницы с выборами курса и к редактированию ее, а так же к своему 
профилю, доступный на платформе.

Этот функционал состоит из следующих блоков:
1. Редактирование курса/заданий
2. Просмотр статистики пользователей
3. Чат с пользователями и чат с модераторами
4. Отправка рассылки через tg-bot'a

### 2.3.1 Редактирование курса

Модератор может получить доступ к коду любого задания, а так же редактированию его. Так же менять названия топиков и условия задач.

### 2.3.2 Просмотр статистики пользователей

Модератор может зайти в профиль любого пользователя и посмотреть статистку.

### 2.3.3 Чат с пользователями и чат с модераторами

Чат будет реализован в двух видах.

1. Чат под заданием

Под каждым заданием после n-кого количетсва не правильно засланных задач будет открываться доступ к чату с модератором
где пользователь сможет задать конкретный вопрос или отправить свою решение для консультации с модератором
 
2. Кнопка поддержка на главном экране

На главном сайте будет реализована кнопка поддержки где будут ответы на самые часто задаваемые вопросы,
а так же кнопка "нет ответа на вопрос", после нажатия на нее открывается чат с модератором, где пользователь
может заадть любой вопрос.

### 2.3.4 Отправка рассылки через tg-bot'a

Будет реализовано несколько видов рассылки

1. Рассылка об ответе на вопросы

Когда в чате по заданию пользователя модератор ответит на вопрос пользователя, пользователю придет сообщение в
телеграм-боте о том, что модератор/куратор оставил комментарий.

2. Общая рассылка

Общая рассылка предозумевает сообщение для всех пользователей с новостями.

# 3. Предлагаемый стек технологий

Для реализации системы предлагается следующий стек технологий:

* Бэкенд:
    - Язык Python
    - Фреймворк FastAPI
    - БД PostgreSQL
    - SQLAlchemy ORM
    - Alembic для миграций – под вопросом
    - Aiogram для интеграции с Telegram
* Фронтенд:
    - React
    - viewJS/ solidJS

Для интернет-эквайринга рассматриваются Тинькофф и CloudPayments,
в ходе проекта надо сравнить технические возможности платформ и комиссии
за платежи. Важно иметь возможность оплаты с Google Pay и Apple Pay, в том
числе рекуррентные платежи (если Google Pay и Apple Pay позволяют такое
делать, уточнить в ходе проекта). Важно открыть в эквайринге другие страны 
для возможности приёма оплаты не только из РФ, но и из стран СНГ и других
стран. Обсудить это в ходе проекта с эквайрингом.

Хранение файлов и изображений, загружаемых автором, должно осуществляться
в S3-совместимом хранилище.

# 4. Требования к дизайну

Минимализм, лаконичность, акцент на контент. Белый фон. Должен присутствовать
логотип Системы где-то на странице. Логотип надо разработать в рамках
этого проекта.

В нижней части страницы (в подвале) должно быть написано:

«Работает на Open Source» со ссылкой на GitHub проекта.






